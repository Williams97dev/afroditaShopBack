extends ../layouts/layout_products.pug

block main
	if message.length > 0
		script.
			Swal.fire("#{message[0]}");

	h3.title.is-3  Listado de productos (#{products.length})
	h4.title.is-4 Pagina #{page}
	.page-buttons.mb-4 
		if page !== 1
			a.button(href="?page="+(page-1)) Previous
		else 
			a.button(disabled) Previous
		
		if products.length <5
			a.button(disabled) Next
		else 
			a.button(href="?page="+(page+1)) Next
	table.table.is-fullwidth.is-striped.is-bordered 
		thead
			tr
				th Nombre
				th DescripciÃ³n
				th Precio
				th CategorÃ­a
				th Disponible
				th Acciones
		tbody
			each product in products 
				tr 
					td= product.name 
					td= product.description
					td #{product.price}â‚¬
					td= product.category
					td= (product.available === 1) ? 'SI ðŸ¥³' : 'NO ðŸ˜¡'
					td
						a.button.is-small.mr-1(href="/products/"+product.id) ðŸ‘ï¸
						a.button.is-small.mr-1(href="/products/edit/"+product.id) âœï¸
						a.button.is-small(href="/products/remove/"+product.id,onclick='return confirm("Seguro que quieres borrarlo?")') ðŸ—‘ï¸
						a#borradoRapido.button.is-small(data-productid=product.id) ðŸ§¹

	.products
		each product in products
			.card
				header.card-header
						p.card-header-title= product.name 
				.card-content
						.content
							p= product.description
							p #{product.price}â‚¬
				footer.card-footer
						a.card-footer-item(href='/products/'+product.id) View
						a.card-footer-item(href='/products/edit/'+product.id) Edit
						a.card-footer-item(href='/products/remove/'+product.id, onclick='return confirm("Seguro que quieres borrarlo?")') Delete
	script.
		const botones  = document.querySelectorAll('#borradoRapido');

		 for(let boton of botones) {
			 	boton.addEventListener('click', function(event){
				console.log(boton.dataset.productid)

			 })
		 }

